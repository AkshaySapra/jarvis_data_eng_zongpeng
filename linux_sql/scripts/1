# script usage 
# ./scripts/psql_docker.sh start|stop [password for database]

if (($#>2));
then
	echo "You have entered too many arguments!"
	echo "Format: psql_docker.sh start [password] OR psql_docker.sh stop"
	exit 1
fi

if [ "$1" == "start" ];
then
	if [ ! systemctl status docker ];
	then
		systemctl status docker || systemctl start docker
		docker run --rm --name jrvs-psql -e POSTGRES_PASSWORD=$2 -d -v pgdata:/var/lib/postgresql/data -p 5432:5432 postgres
	fi
	psql -h localhost -U postgres -W
fi

exit 0
